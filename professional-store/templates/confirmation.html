{% extends "base.html" %}

{% block title %}Order Confirmation - JUSTIN E-COMMERCE{% endblock %}

{% block content %}
<div class="confirmation-container">
    <!-- Success Icon -->
    <div class="confirmation-success">
        <div class="success-icon">âœ…</div>
        <h1>Order Confirmed!</h1>
        <p class="success-message">Thank you for your purchase!</p>
    </div>
    
    <!-- Order Details -->
    <div class="confirmation-details">
        <div class="confirmation-card">
            <h2>Order Information</h2>
            
            <div class="detail-row">
                <span class="detail-label">Order Number:</span>
                <span class="detail-value order-number">{{ order.order_number }}</span>
            </div>
            
            <div class="detail-row">
                <span class="detail-label">Order Date:</span>
                <span class="detail-value">{{ order.created_at.strftime('%B %d, %Y at %I:%M %p') }}</span>
            </div>
            
            <div class="detail-row">
                <span class="detail-label">Status:</span>
                <span class="detail-value status-badge">{{ order.status.title() }}</span>
            </div>
            
            <div class="detail-row">
                <span class="detail-label">Email:</span>
                <span class="detail-value">{{ order.customer_email }}</span>
            </div>
        </div>
        
        <!-- Shipping Address -->
        <div class="confirmation-card">
            <h2>Shipping Address</h2>
            <p class="address-text">
                {{ order.customer_name }}<br>
                {{ order.shipping_address }}<br>
                {{ order.shipping_city }}, {{ order.shipping_state }} {{ order.shipping_zip }}
            </p>
        </div>
        
        <!-- Order Items -->
        <div class="confirmation-card">
            <h2>Order Items</h2>
            <div class="order-items-list">
                {% for item in order.items %}
                <div class="order-item-row">
                    <div class="item-info">
                        <strong>{{ item.product_name }}</strong>
                        <span class="item-quantity">Quantity: {{ item.quantity }}</span>
                    </div>
                    <div class="item-price">
                        ${{ (item.subtotal / 100)|round(2) }}
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <!-- Order Totals -->
            <div class="order-totals">
                <div class="total-row">
                    <span>Subtotal:</span>
                    <span>${{ (order.subtotal / 100)|round(2) }}</span>
                </div>
                <div class="total-row">
                    <span>Tax:</span>
                    <span>${{ (order.tax / 100)|round(2) }}</span>
                </div>
                <div class="total-row">
                    <span>Shipping:</span>
                    <span>${{ (order.shipping / 100)|round(2) }}</span>
                </div>
                <div class="total-divider"></div>
                <div class="total-row total-final">
                    <span>Total Paid:</span>
                    <span>${{ (order.total / 100)|round(2) }}</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Next Steps -->
    <div class="confirmation-next-steps">
        <h2>What's Next?</h2>
        <div class="next-steps-grid">
            <div class="step-card">
                <div class="step-icon">ðŸ“§</div>
                <h3>Check Your Email</h3>
                <p>A confirmation email has been sent to {{ order.customer_email }}</p>
            </div>
            
            <div class="step-card">
                <div class="step-icon">ðŸ“¦</div>
                <h3>We're Processing</h3>
                <p>Your order is being prepared for shipment</p>
            </div>
            
            <div class="step-card">
                <div class="step-icon">ðŸšš</div>
                <h3>Shipping Updates</h3>
                <p>You'll receive tracking information soon</p>
            </div>
        </div>
    </div>
    
    <!-- Action Buttons -->
    <div class="confirmation-actions">
        <a href="{{ url_for('store.store') }}" class="btn-continue-shopping">
            Continue Shopping
        </a>
        <a href="{{ url_for('store.landing') }}" class="btn-home">
            Return to Home
        </a>
    </div>
    
    <!-- Humorous Thank You -->
    <div class="confirmation-footer">
        <p class="footer-message">ðŸŽ‰ Congratulations! You just made me richer! ðŸ’°</p>
        <p class="footer-tagline">Thank you for shopping at JUSTIN E-COMMERCE</p>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Confetti animation on page load
    window.addEventListener('load', function() {
        createConfetti();
    });
    
    function createConfetti() {
        const colors = ['#4a90e2', '#5dade2', '#c0c5ce', '#8b0000', '#a52a2a'];
        const confettiCount = 50;
        
        for (let i = 0; i < confettiCount; i++) {
            setTimeout(() => {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.animationDuration = (Math.random() * 3 + 2) + 's';
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 5000);
            }, i * 30);
        }
    }
</script>
{% endblock %}